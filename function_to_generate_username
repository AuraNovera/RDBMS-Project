CREATE OR REPLACE FUNCTION GEN_username(dob DATE,name VARCHAR2)
RETURN VARCHAR2
IS
DATE1 VARCHAR2(20);
DATE2 VARCHAR2(20);
DATE3 VARCHAR2(20);
username varchar2(20);
FINAL VARCHAR2(20);
BEGIN 
SELECT EXTRACT(YEAR FROM dob) INTO DATE1 FROM DUAL;
DATE2:= TO_CHAR(DATE1);
DATE3:=SUBSTR(DATE2,3,2);
SELECT (name||DATE3) INTO FINAL FROM DUAL;
RETURN FINAL;
END;
/



CREATE OR REPLACE TRIGGER TRIGGER_bing2
BEFORE INSERT 
ON customers
FOR EACH ROW
DECLARE
BEGIN
:NEW.username := GEN_username(:NEW.dob,:NEW.name);
END;
/